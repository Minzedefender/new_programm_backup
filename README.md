 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/README.md b/README.md
index 6e4f8d6deb1e73b33877d79b5ce525e886b0ee44..fa41346bfd953e0ab341b72250ecd8a1ec1da67e 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,176 @@
-Hello, my backup1c
+# Автоматизация резервного копирования баз 1С
+
+Утилита предназначена для резервного копирования файловых и клиент-серверных
+баз 1С с последующей выгрузкой архивов на локальный диск и (опционально)
+в облако Яндекс.Диск. Все чувствительные данные — токены, логины и пароли —
+хранятся в зашифрованном виде и подставляются в момент выполнения скрипта.
+
+## Основные возможности
+
+- Поддержка файловых баз (`1CD`) и клиент-серверных (SQL) баз 1С.
+- Автоматическое формирование архивов с именем вида
+  `<имя>_ГГГГ_ММ_ДД_ЧЧ_ММ_СС.zip`.
+- Управление службами перед началом и после завершения резервного копирования
+  (остановка `ras`, Apache и т. п.).
+- Настройка сроков хранения архивов (по умолчанию 7 дней) с автоматическим
+  удалением устаревших файлов.
+- Выгрузка готовых архивов в Яндекс.Диск через WebDAV с использованием
+  OAuth-токена или пары логин/пароль.
+- Хранение секретов в зашифрованном файле при помощи библиотеки
+  `cryptography`.
+- Интерактивное добавление новых баз с подсказками и автоматической генерацией
+  конфигурации.
+
+## Быстрый старт
+
+1. Установите Python 3.10+ (скрипт протестирован на Linux, но будет работать
+   и под Windows).
+2. Создайте виртуальное окружение и установите зависимости:
+
+   ```bash
+   python -m venv .venv
+   source .venv/bin/activate  # для Windows: .venv\Scripts\activate
+   pip install -r requirements.txt
+   ```
+
+3. Сгенерируйте ключ шифрования секретов:
+
+   ```bash
+   python backup_manager.py init-key
+   ```
+
+   Ключ будет сохранён в `secrets/key.key`. Его **нельзя терять**, иначе
+   зашифрованные токены будет невозможно прочитать.
+
+4. Создайте или обновите секреты (например, OAuth-токен Яндекс.Диска):
+
+   ```bash
+   python backup_manager.py set-secret YANDEX_TOKEN_MYBASE
+   ```
+
+   Команда предложит ввести значение дважды и сохранит его в файле
+   `secrets/secrets.json`.
+
+5. Добавьте новую базу в конфигурацию (интерактивный режим):
+
+   ```bash
+   python backup_manager.py add-base
+   ```
+
+   Скрипт задаст вопросы согласно схеме: название, тип (файловая/SQL), папка
+   для бэкапов, срок хранения, параметры для облака, команды остановки служб и
+   т. д. Все требуемые секреты можно создать прямо во время настройки.
+
+6. Запустите резервное копирование:
+
+   ```bash
+   python backup_manager.py run
+   ```
+
+   Для запуска конкретной базы используйте ключ `--database` (можно повторять
+   несколько раз).
+
+## Работа с секретами
+
+- `python backup_manager.py init-key` — создать/пересоздать ключ шифрования
+  (перезапись ключа сделает текущие секреты нечитаемыми).
+- `python backup_manager.py set-secret NAME` — задать значение секрета.
+  Можно передать `--stdin`, чтобы считать значение из стандартного ввода.
+- `python backup_manager.py list-secrets` — вывести список сохранённых секретов
+  (значения при этом не раскрываются).
+
+Все секреты хранятся в `secrets/secrets.json` и расшифровываются только в
+момент выполнения команд.
+
+## Формат конфигурации
+
+Файл `config.yaml` создаётся автоматически после выполнения `add-base`.
+Примерная структура:
+
+```yaml
+databases:
+  - name: "FileBase"
+    type: "file"
+    source: "/path/to/1c/base"
+    backup_directory: "backups/FileBase"
+    backup_prefix: "FileBase"
+    retention_days: 7
+    cloud:
+      enabled: true
+      provider: "yandex"
+      remote_path: "/backups/{safe_name}"
+      token_secret: "YANDEX_TOKEN_FILEBASE"
+  - name: "SQLBase"
+    type: "sql"
+    source: "cluster1/sql_base"
+    backup_directory: "backups/SQLBase"
+    retention_days: 7
+    service:
+      stop_command: "systemctl stop srv1cv83"
+      start_command: "systemctl start srv1cv83"
+    sql:
+      dump_command: '"/opt/1C/v8.3/x86_64/rac" dump infobase {source} {sql_dump_file} --db-user {sql_login} --db-pwd {sql_password}'
+      dump_extension: ".dt"
+      working_directory: "/opt/1C/v8.3/x86_64"
+      login_secret: "SQL_LOGIN_SQLBASE"
+      password_secret: "SQL_PASSWORD_SQLBASE"
+```
+
+### Доступные шаблонные переменные
+
+Строки `dump_command` и `cloud.remote_path` поддерживают подстановку значений
+через синтаксис `str.format`. Доступны переменные:
+
+- `{name}` — имя базы из конфигурации.
+- `{safe_name}` — безопасный для файловой системы вариант имени.
+- `{source}` — путь/описание базы.
+- `{timestamp}` — метка времени в формате `ГГГГ_ММ_ДД_ЧЧ_ММ_СС`.
+- `{backup_directory}`, `{backup_path}`, `{backup_filename}` — пути до
+  каталога и итогового архива.
+- `{sql_dump_dir}`, `{sql_dump_file}` — каталог и файл для временного дампа
+  (доступны только для SQL-баз).
+- `{sql_login}`, `{sql_password}` — значения из секретов (если заданы).
+
+## Загрузка в облако
+
+Сейчас реализована выгрузка в Яндекс.Диск по протоколу WebDAV. Можно
+использовать OAuth-токен или логин/пароль. Путь в `remote_path` воспринимается
+как папка, в которую будет загружен архив; при необходимости промежуточные
+каталоги создаются автоматически.
+
+## Автоматизация запуска
+
+Скрипт можно вызывать из cron или Планировщика заданий Windows. Пример записи
+для cron (ежедневно в 03:30):
+
+```
+30 3 * * * /usr/bin/python /opt/backup1c/backup_manager.py run >> /var/log/backup1c.log 2>&1
+```
+
+## Структура проекта
+
+- `backup_manager.py` — командная оболочка.
+- `backup_tool/` — модуль с логикой резервного копирования, шифрования секретов
+  и интеграций с облаком.
+- `config.example.yaml` — пример конфигурации.
+- `requirements.txt` — список зависимостей.
+
+## Диагностика
+
+Логи выводятся в стандартный вывод. Используйте флаги `-v` или `-vv`, чтобы
+увеличить детализацию (до уровня DEBUG). При ошибках выполнения команды
+возвращают код 1 и выводят текст ошибки.
+
+## Замечания по безопасности
+
+- Не храните ключ шифрования (`secrets/key.key`) и зашифрованные секреты
+  (`secrets/secrets.json`) в общедоступных местах.
+- Регулярно проверяйте успешность выгрузки на Яндекс.Диск и целостность
+  локальных архивов.
+- При смене паролей не забудьте обновить соответствующие секреты через
+  `set-secret`.
+
+## Пример конфигурации
+
+См. файл [config.example.yaml](config.example.yaml) для подробного примера с
+комментариями и placeholder-переменными.
 
EOF
)